# æ—¶å…‰è½´ç¬”è®°é¡¹ç›® - æ–°æ‰‹éƒ¨ç½²å®Œæ•´æŒ‡å—

> ğŸ¯ **é€‚ç”¨äººç¾¤**: çº¯æ–°æ‰‹å°ç™½  
> ğŸ“… **æ›´æ–°æ—¶é—´**: 2025å¹´1æœˆ22æ—¥  
> â±ï¸ **é¢„è®¡å®Œæˆæ—¶é—´**: 2-3å°æ—¶  

---

## ğŸ“‹ éƒ¨ç½²æµç¨‹æ¦‚è§ˆ

```mermaid
graph TD
    A[å‡†å¤‡å·¥ä½œ] --> B[ä¸Šä¼ åˆ°GitHub]
    B --> C[è´­ä¹°/å‡†å¤‡æœåŠ¡å™¨]
    C --> D[é…ç½®æœåŠ¡å™¨ç¯å¢ƒ]
    D --> E[ä¸‹è½½é¡¹ç›®åˆ°æœåŠ¡å™¨]
    E --> F[é…ç½®åŸŸåå’ŒSSL]
    F --> G[å¯åŠ¨é¡¹ç›®]
    G --> H[æµ‹è¯•å’Œç›‘æ§]
```

---

## ğŸ› ï¸ ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å·¥ä½œ

### 1.1 éœ€è¦å‡†å¤‡çš„è´¦å·å’Œå·¥å…·

#### å¿…éœ€è´¦å·:
- **GitHubè´¦å·** (å…è´¹) - ç”¨äºå­˜å‚¨ä»£ç 
- **æœåŠ¡å™¨æä¾›å•†è´¦å·** (æ¨èé˜¿é‡Œäº‘/è…¾è®¯äº‘) - ç”¨äºéƒ¨ç½²é¡¹ç›®
- **åŸŸåæ³¨å†Œå•†è´¦å·** (å¯é€‰ï¼Œæ¨èé˜¿é‡Œäº‘/è…¾è®¯äº‘) - ç”¨äºç»‘å®šåŸŸå

#### å¿…éœ€å·¥å…·:
- **Git** - ä»£ç ç‰ˆæœ¬ç®¡ç†å·¥å…·
- **SSHå®¢æˆ·ç«¯** (Windowsæ¨èPuTTYæˆ–Windows Terminal)
- **æ–‡æœ¬ç¼–è¾‘å™¨** (æ¨èVS Code)

### 1.2 å®‰è£…Git (Windows)

1. è®¿é—® [https://git-scm.com/download/win](https://git-scm.com/download/win)
2. ä¸‹è½½å¹¶å®‰è£…Git
3. å®‰è£…æ—¶é€‰æ‹©é»˜è®¤é€‰é¡¹å³å¯
4. æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥ `git --version` éªŒè¯å®‰è£…

---

## ğŸ“¤ ç¬¬äºŒæ­¥ï¼šä¸Šä¼ é¡¹ç›®åˆ°GitHub

### 2.1 åˆ›å»ºGitHubä»“åº“

1. **ç™»å½•GitHub**
   - è®¿é—® [https://github.com](https://github.com)
   - ç‚¹å‡»å³ä¸Šè§’ "Sign in" ç™»å½•

2. **åˆ›å»ºæ–°ä»“åº“**
   - ç‚¹å‡»å³ä¸Šè§’ "+" å·
   - é€‰æ‹© "New repository"
   - å¡«å†™ä»“åº“ä¿¡æ¯:
     - Repository name: `timeline-notebook`
     - Description: `æ—¶å…‰è½´ç¬”è®° - ä¸ªäººæ—¶é—´çº¿è®°å½•åº”ç”¨`
     - é€‰æ‹© "Public" (å…¬å¼€) æˆ– "Private" (ç§æœ‰)
     - âœ… å‹¾é€‰ "Add a README file"
   - ç‚¹å‡» "Create repository"

### 2.2 å‡†å¤‡é¡¹ç›®æ–‡ä»¶

åœ¨ä¸Šä¼ å‰ï¼Œéœ€è¦åˆ›å»º `.gitignore` æ–‡ä»¶æ¥å¿½ç•¥ä¸éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶:

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º .gitignore æ–‡ä»¶
echo "# ä¾èµ–æ–‡ä»¶
node_modules/
__pycache__/
*.pyc

# ç¯å¢ƒé…ç½®æ–‡ä»¶
.env
.env.local
.env.production

# æ•°æ®åº“æ–‡ä»¶
*.db
*.sqlite
*.sqlite3

# æ—¥å¿—æ–‡ä»¶
logs/
*.log

# ä¸Šä¼ æ–‡ä»¶
static/uploads/
uploads/

# ä¸´æ—¶æ–‡ä»¶
.DS_Store
Thumbs.db

# IDEæ–‡ä»¶
.vscode/
.idea/

# SSLè¯ä¹¦
ssl/
*.pem
*.key
*.crt" > .gitignore
```

### 2.3 ä¸Šä¼ ä»£ç åˆ°GitHub

#### æ–¹æ³•ä¸€: ä½¿ç”¨Gitå‘½ä»¤è¡Œ (æ¨è)

1. **æ‰“å¼€å‘½ä»¤æç¤ºç¬¦**
   - æŒ‰ `Win + R`ï¼Œè¾“å…¥ `cmd`ï¼Œå›è½¦
   - ä½¿ç”¨ `cd` å‘½ä»¤è¿›å…¥é¡¹ç›®ç›®å½•
   ```bash
   cd C:\Users\Administrator\Desktop\timeline-notebook-main\timeline-notebook-main
   ```

2. **åˆå§‹åŒ–Gitä»“åº“**
   ```bash
   git init
   ```

3. **é…ç½®Gitç”¨æˆ·ä¿¡æ¯** (é¦–æ¬¡ä½¿ç”¨)
   ```bash
   git config --global user.name "ä½ çš„ç”¨æˆ·å"
   git config --global user.email "ä½ çš„é‚®ç®±@example.com"
   ```

4. **æ·»åŠ æ–‡ä»¶åˆ°Git**
   ```bash
   git add .
   ```

5. **æäº¤ä»£ç **
   ```bash
   git commit -m "åˆå§‹æäº¤ï¼šæ—¶å…‰è½´ç¬”è®°é¡¹ç›®"
   ```

6. **è¿æ¥åˆ°GitHubä»“åº“**
   ```bash
   git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/timeline-notebook.git
   ```

7. **æ¨é€ä»£ç åˆ°GitHub**
   ```bash
   git branch -M main
   git push -u origin main
   ```

#### æ–¹æ³•äºŒ: ä½¿ç”¨GitHub Desktop (å›¾å½¢ç•Œé¢)

1. ä¸‹è½½å¹¶å®‰è£… [GitHub Desktop](https://desktop.github.com/)
2. ç™»å½•GitHubè´¦å·
3. ç‚¹å‡» "Clone a repository from the Internet"
4. é€‰æ‹©ä½ åˆšåˆ›å»ºçš„ä»“åº“
5. é€‰æ‹©æœ¬åœ°å­˜å‚¨ä½ç½®
6. å°†é¡¹ç›®æ–‡ä»¶å¤åˆ¶åˆ°å…‹éš†çš„æ–‡ä»¶å¤¹ä¸­
7. åœ¨GitHub Desktopä¸­æäº¤å¹¶æ¨é€æ›´æ”¹

---

## ğŸ–¥ï¸ ç¬¬ä¸‰æ­¥ï¼šè´­ä¹°å’Œé…ç½®æœåŠ¡å™¨

### 3.1 æœåŠ¡å™¨é€‰æ‹©å»ºè®®

#### æ¨èé…ç½®:
- **CPU**: 2æ ¸å¿ƒæˆ–ä»¥ä¸Š
- **å†…å­˜**: 4GBæˆ–ä»¥ä¸Š
- **å­˜å‚¨**: 40GB SSDæˆ–ä»¥ä¸Š
- **å¸¦å®½**: 5Mbpsæˆ–ä»¥ä¸Š
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04 LTS æˆ– Ubuntu 22.04 LTS

#### æœåŠ¡å™¨æä¾›å•†æ¨è:

**é˜¿é‡Œäº‘ECS**:
- æ–°ç”¨æˆ·æœ‰ä¼˜æƒ 
- å›½å†…è®¿é—®é€Ÿåº¦å¿«
- ä¸­æ–‡å®¢æœæ”¯æŒ

**è…¾è®¯äº‘CVM**:
- ä»·æ ¼ç›¸å¯¹ä¾¿å®œ
- ç¨³å®šæ€§å¥½
- é€‚åˆä¸ªäººé¡¹ç›®

**åä¸ºäº‘ECS**:
- ä¼ä¸šçº§ç¨³å®šæ€§
- æŠ€æœ¯æ”¯æŒå®Œå–„

### 3.2 è´­ä¹°æœåŠ¡å™¨æ­¥éª¤ (ä»¥é˜¿é‡Œäº‘ä¸ºä¾‹)

1. **æ³¨å†Œé˜¿é‡Œäº‘è´¦å·**
   - è®¿é—® [https://www.aliyun.com](https://www.aliyun.com)
   - ç‚¹å‡» "å…è´¹æ³¨å†Œ"
   - å®Œæˆå®åè®¤è¯

2. **è´­ä¹°ECSå®ä¾‹**
   - è¿›å…¥ "äº§å“" -> "äº‘æœåŠ¡å™¨ECS"
   - ç‚¹å‡» "ç«‹å³è´­ä¹°"
   - é€‰æ‹©é…ç½®:
     - åœ°åŸŸ: é€‰æ‹©ç¦»ä½ æœ€è¿‘çš„åœ°åŒº
     - å®ä¾‹è§„æ ¼: ecs.t5-lc2m1.nano (å…¥é—¨çº§) æˆ– ecs.t5-lc1m2.small
     - é•œåƒ: Ubuntu 20.04 64ä½
     - å­˜å‚¨: 40GB é«˜æ•ˆäº‘ç›˜
     - ç½‘ç»œ: é»˜è®¤VPC
     - å…¬ç½‘IP: åˆ†é…å…¬ç½‘IPv4åœ°å€
     - å¸¦å®½: æŒ‰ä½¿ç”¨æµé‡ï¼Œå³°å€¼å¸¦å®½5Mbps
   - è®¾ç½®å¯†ç  (è®°ä½è¿™ä¸ªå¯†ç ï¼Œåé¢SSHè¿æ¥éœ€è¦ç”¨)
   - ç¡®è®¤è®¢å•å¹¶æ”¯ä»˜

3. **é…ç½®å®‰å…¨ç»„**
   - åœ¨ECSæ§åˆ¶å°æ‰¾åˆ°ä½ çš„å®ä¾‹
   - ç‚¹å‡» "æ›´å¤š" -> "ç½‘ç»œå’Œå®‰å…¨ç»„" -> "å®‰å…¨ç»„é…ç½®"
   - æ·»åŠ å®‰å…¨ç»„è§„åˆ™:
     ```
     ç«¯å£èŒƒå›´: 22/22 (SSH)
     æˆæƒå¯¹è±¡: 0.0.0.0/0
     
     ç«¯å£èŒƒå›´: 80/80 (HTTP)
     æˆæƒå¯¹è±¡: 0.0.0.0/0
     
     ç«¯å£èŒƒå›´: 443/443 (HTTPS)
     æˆæƒå¯¹è±¡: 0.0.0.0/0
     ```

---

## ğŸ”§ ç¬¬å››æ­¥ï¼šé…ç½®æœåŠ¡å™¨ç¯å¢ƒ

### 4.1 è¿æ¥åˆ°æœåŠ¡å™¨

#### Windowsç”¨æˆ· - ä½¿ç”¨PuTTY:

1. **ä¸‹è½½PuTTY**
   - è®¿é—® [https://www.putty.org/](https://www.putty.org/)
   - ä¸‹è½½å¹¶å®‰è£…PuTTY

2. **è¿æ¥æœåŠ¡å™¨**
   - æ‰“å¼€PuTTY
   - Host Name: è¾“å…¥æœåŠ¡å™¨å…¬ç½‘IP
   - Port: 22
   - Connection type: SSH
   - ç‚¹å‡» "Open"
   - ç”¨æˆ·å: `root`
   - å¯†ç : è´­ä¹°æœåŠ¡å™¨æ—¶è®¾ç½®çš„å¯†ç 

#### Windowsç”¨æˆ· - ä½¿ç”¨Windows Terminal (æ¨è):

```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP
# è¾“å…¥å¯†ç 
```

### 4.2 æ›´æ–°ç³»ç»Ÿ

```bash
# æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨
sudo apt update

# å‡çº§ç³»ç»Ÿ
sudo apt upgrade -y

# å®‰è£…åŸºç¡€å·¥å…·
sudo apt install -y curl wget vim git unzip
```

### 4.3 å®‰è£…Dockerå’ŒDocker Compose

#### å®‰è£…Docker:

```bash
# å¸è½½æ—§ç‰ˆæœ¬
sudo apt-get remove docker docker-engine docker.io containerd runc

# å®‰è£…ä¾èµ–
sudo apt-get update
sudo apt-get install -y \
    ca-certificates \
    curl \
    gnupg \
    lsb-release

# æ·»åŠ Dockerå®˜æ–¹GPGå¯†é’¥
sudo mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

# æ·»åŠ Dockerä»“åº“
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# å®‰è£…Docker Engine
sudo apt-get update
sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin

# å¯åŠ¨DockeræœåŠ¡
sudo systemctl start docker
sudo systemctl enable docker

# éªŒè¯å®‰è£…
sudo docker --version
```

#### å®‰è£…Docker Compose:

```bash
# ä¸‹è½½Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose

# æ·»åŠ æ‰§è¡Œæƒé™
sudo chmod +x /usr/local/bin/docker-compose

# éªŒè¯å®‰è£…
docker-compose --version
```

#### é…ç½®Dockeræƒé™ (å¯é€‰):

```bash
# å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ°dockerç»„
sudo usermod -aG docker $USER

# é‡æ–°ç™»å½•æˆ–æ‰§è¡Œä»¥ä¸‹å‘½ä»¤
newgrp docker

# æµ‹è¯•æ˜¯å¦å¯ä»¥ä¸ç”¨sudoè¿è¡Œdocker
docker --version
```

---

## ğŸ“¥ ç¬¬äº”æ­¥ï¼šä¸‹è½½é¡¹ç›®åˆ°æœåŠ¡å™¨

### 5.1 å…‹éš†é¡¹ç›®

```bash
# è¿›å…¥ç”¨æˆ·ä¸»ç›®å½•
cd ~

# å…‹éš†é¡¹ç›® (æ›¿æ¢ä¸ºä½ çš„GitHubä»“åº“åœ°å€)
git clone https://github.com/ä½ çš„ç”¨æˆ·å/timeline-notebook.git

# è¿›å…¥é¡¹ç›®ç›®å½•
cd timeline-notebook

# æŸ¥çœ‹é¡¹ç›®æ–‡ä»¶
ls -la
```

### 5.2 é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡æ–‡ä»¶
vim .env
```

åœ¨vimç¼–è¾‘å™¨ä¸­:
1. æŒ‰ `i` è¿›å…¥æ’å…¥æ¨¡å¼
2. ä¿®æ”¹ä»¥ä¸‹é…ç½®:

```bash
# ç”Ÿäº§ç¯å¢ƒé…ç½®
FLASK_ENV=production
SECRET_KEY=ä½ çš„éšæœºå¯†é’¥_è¯·ç”Ÿæˆä¸€ä¸ªå¤æ‚çš„å¯†é’¥
DATABASE_URL=sqlite:///data/timeline.db
UPLOAD_FOLDER=/app/static/uploads
MAX_CONTENT_LENGTH=104857600

# åŸŸåé…ç½® (æ›¿æ¢ä¸ºä½ çš„å®é™…åŸŸå)
DOMAIN=your-domain.com

# CORSé…ç½®
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com

# æ—¥å¿—é…ç½®
LOG_LEVEL=WARNING

# å®‰å…¨é…ç½®
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax
```

3. æŒ‰ `Esc` é€€å‡ºæ’å…¥æ¨¡å¼
4. è¾“å…¥ `:wq` ä¿å­˜å¹¶é€€å‡º

### 5.3 ç”Ÿæˆå®‰å…¨å¯†é’¥

```bash
# ç”Ÿæˆéšæœºå¯†é’¥
python3 -c "import secrets; print(secrets.token_hex(32))"

# å°†ç”Ÿæˆçš„å¯†é’¥æ›¿æ¢åˆ°.envæ–‡ä»¶ä¸­çš„SECRET_KEY
```

### 5.4 é…ç½®å‰ç«¯ç¯å¢ƒå˜é‡

```bash
# ç¼–è¾‘å‰ç«¯ç¯å¢ƒå˜é‡
vim frontend/.env.production
```

ä¿®æ”¹å†…å®¹:
```bash
# Timeline Notebook å‰ç«¯ç”Ÿäº§ç¯å¢ƒé…ç½®

# API åŸºç¡€URL (æ›¿æ¢ä¸ºä½ çš„åŸŸå)
VITE_API_BASE_URL=https://your-domain.com/api

# åª’ä½“æ–‡ä»¶åŸºç¡€URL
VITE_MEDIA_BASE_URL=https://your-domain.com/static

# WebSocketåŸºç¡€URL
VITE_WS_BASE_URL=wss://your-domain.com

# ç¯å¢ƒæ ‡è¯†
VITE_APP_ENV=production

# è°ƒè¯•æ¨¡å¼
VITE_DEBUG=false
```

---

## ğŸŒ ç¬¬å…­æ­¥ï¼šé…ç½®åŸŸåå’ŒSSLè¯ä¹¦

### 6.1 åŸŸåé…ç½® (å¯é€‰ä½†æ¨è)

#### è´­ä¹°åŸŸå:
1. åœ¨é˜¿é‡Œäº‘/è…¾è®¯äº‘è´­ä¹°åŸŸå
2. å®ŒæˆåŸŸåå®åè®¤è¯
3. é…ç½®DNSè§£æ:
   - è®°å½•ç±»å‹: A
   - ä¸»æœºè®°å½•: @
   - è®°å½•å€¼: ä½ çš„æœåŠ¡å™¨å…¬ç½‘IP
   - TTL: 600

#### æ·»åŠ wwwå­åŸŸå:
- è®°å½•ç±»å‹: CNAME
- ä¸»æœºè®°å½•: www
- è®°å½•å€¼: your-domain.com
- TTL: 600

### 6.2 SSLè¯ä¹¦é…ç½®

#### æ–¹æ³•ä¸€: ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦ (æ¨è)

```bash
# å®‰è£…Certbot
sudo apt install -y certbot python3-certbot-nginx

# ç”ŸæˆSSLè¯ä¹¦ (æ›¿æ¢ä¸ºä½ çš„åŸŸå)
sudo certbot certonly --standalone -d your-domain.com -d www.your-domain.com

# è¯ä¹¦æ–‡ä»¶ä¼šä¿å­˜åœ¨ /etc/letsencrypt/live/your-domain.com/
```

#### å¤åˆ¶è¯ä¹¦åˆ°é¡¹ç›®ç›®å½•:

```bash
# åˆ›å»ºsslç›®å½•
mkdir -p ~/timeline-notebook/ssl

# å¤åˆ¶è¯ä¹¦æ–‡ä»¶
sudo cp /etc/letsencrypt/live/your-domain.com/fullchain.pem ~/timeline-notebook/ssl/
sudo cp /etc/letsencrypt/live/your-domain.com/privkey.pem ~/timeline-notebook/ssl/

# ä¿®æ”¹æ–‡ä»¶æƒé™
sudo chown $USER:$USER ~/timeline-notebook/ssl/*
chmod 644 ~/timeline-notebook/ssl/*
```

#### è®¾ç½®è‡ªåŠ¨ç»­æœŸ:

```bash
# æ·»åŠ å®šæ—¶ä»»åŠ¡
sudo crontab -e

# æ·»åŠ ä»¥ä¸‹è¡Œ (æ¯æœˆ1å·å‡Œæ™¨2ç‚¹æ£€æŸ¥å¹¶ç»­æœŸ)
0 2 1 * * /usr/bin/certbot renew --quiet
```

#### æ–¹æ³•äºŒ: ä½¿ç”¨è‡ªç­¾åè¯ä¹¦ (ä»…ç”¨äºæµ‹è¯•)

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd ~/timeline-notebook

# è¿è¡ŒSSLç”Ÿæˆè„šæœ¬
bash generate-ssl.sh
```

---

## ğŸš€ ç¬¬ä¸ƒæ­¥ï¼šå¯åŠ¨é¡¹ç›®

### 7.1 æ„å»ºå’Œå¯åŠ¨å®¹å™¨

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd ~/timeline-notebook

# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d --build

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs backend
docker-compose logs frontend
docker-compose logs nginx
```

### 7.2 éªŒè¯æœåŠ¡å¯åŠ¨

```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps

# æ£€æŸ¥ç«¯å£ç›‘å¬
sudo netstat -tlnp | grep :80
sudo netstat -tlnp | grep :443

# æµ‹è¯•å¥åº·æ£€æŸ¥
curl http://localhost/health
curl http://localhost/api/health
```

### 7.3 åˆå§‹åŒ–æ•°æ®åº“

```bash
# è¿›å…¥åç«¯å®¹å™¨
docker-compose exec backend bash

# åœ¨å®¹å™¨å†…è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–
python init_db.py

# é€€å‡ºå®¹å™¨
exit
```

---

## ğŸ§ª ç¬¬å…«æ­¥ï¼šæµ‹è¯•å’ŒéªŒè¯

### 8.1 æœ¬åœ°æµ‹è¯•

```bash
# æµ‹è¯•HTTPè®¿é—®
curl -I http://your-domain.com

# æµ‹è¯•HTTPSè®¿é—®
curl -I https://your-domain.com

# æµ‹è¯•APIæ¥å£
curl https://your-domain.com/api/health
```

### 8.2 æµè§ˆå™¨æµ‹è¯•

1. **æ‰“å¼€æµè§ˆå™¨**
2. **è®¿é—®ä½ çš„åŸŸå**: `https://your-domain.com`
3. **æ£€æŸ¥åŠŸèƒ½**:
   - é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½
   - ç”¨æˆ·æ³¨å†Œ/ç™»å½•åŠŸèƒ½
   - æ—¶é—´çº¿åˆ›å»ºå’Œç¼–è¾‘
   - æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
   - ç•™è¨€å¢™åŠŸèƒ½

### 8.3 æ€§èƒ½æµ‹è¯•

```bash
# å®‰è£…å‹åŠ›æµ‹è¯•å·¥å…·
sudo apt install -y apache2-utils

# ç®€å•å‹åŠ›æµ‹è¯• (100ä¸ªè¯·æ±‚ï¼Œå¹¶å‘10ä¸ª)
ab -n 100 -c 10 https://your-domain.com/
```

---

## ğŸ“Š ç¬¬ä¹æ­¥ï¼šç›‘æ§å’Œç»´æŠ¤

### 9.1 è®¾ç½®ç›‘æ§è„šæœ¬

åˆ›å»ºç›‘æ§è„šæœ¬:
```bash
vim ~/monitor.sh
```

è„šæœ¬å†…å®¹:
```bash
#!/bin/bash

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
echo "=== Dockerå®¹å™¨çŠ¶æ€ ==="
docker-compose -f ~/timeline-notebook/docker-compose.yml ps

echo "\n=== ç³»ç»Ÿèµ„æºä½¿ç”¨ ==="
free -h
df -h

echo "\n=== ç½‘ç»œè¿æ¥ ==="
ss -tlnp | grep -E ':80|:443'

echo "\n=== æœ€è¿‘çš„é”™è¯¯æ—¥å¿— ==="
docker-compose -f ~/timeline-notebook/docker-compose.yml logs --tail=10 | grep -i error
```

æ·»åŠ æ‰§è¡Œæƒé™:
```bash
chmod +x ~/monitor.sh
```

### 9.2 è®¾ç½®æ—¥å¿—è½®è½¬

```bash
# åˆ›å»ºæ—¥å¿—è½®è½¬é…ç½®
sudo vim /etc/logrotate.d/timeline-notebook
```

é…ç½®å†…å®¹:
```bash
/home/*/timeline-notebook/logs/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    copytruncate
}
```

### 9.3 è®¾ç½®è‡ªåŠ¨å¤‡ä»½

åˆ›å»ºå¤‡ä»½è„šæœ¬:
```bash
vim ~/backup.sh
```

è„šæœ¬å†…å®¹:
```bash
#!/bin/bash

BACKUP_DIR="/home/backup/timeline-notebook"
DATE=$(date +%Y%m%d_%H%M%S)

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p $BACKUP_DIR

# å¤‡ä»½æ•°æ®åº“
cp ~/timeline-notebook/data/timeline.db $BACKUP_DIR/timeline_$DATE.db

# å¤‡ä»½ä¸Šä¼ æ–‡ä»¶
tar -czf $BACKUP_DIR/uploads_$DATE.tar.gz -C ~/timeline-notebook/static uploads

# åˆ é™¤30å¤©å‰çš„å¤‡ä»½
find $BACKUP_DIR -name "*.db" -mtime +30 -delete
find $BACKUP_DIR -name "*.tar.gz" -mtime +30 -delete

echo "å¤‡ä»½å®Œæˆ: $DATE"
```

æ·»åŠ åˆ°å®šæ—¶ä»»åŠ¡:
```bash
crontab -e

# æ·»åŠ æ¯å¤©å‡Œæ™¨3ç‚¹å¤‡ä»½
0 3 * * * /home/$(whoami)/backup.sh >> /home/$(whoami)/backup.log 2>&1
```

---

## ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

### 10.1 å®¹å™¨å¯åŠ¨å¤±è´¥

**é—®é¢˜**: å®¹å™¨æ— æ³•å¯åŠ¨

**æ’æŸ¥æ­¥éª¤**:
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
docker-compose logs

# æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
docker-compose config

# æ£€æŸ¥ç«¯å£å ç”¨
sudo netstat -tlnp | grep :80
sudo netstat -tlnp | grep :443

# é‡æ–°æ„å»ºå®¹å™¨
docker-compose down
docker-compose up --build
```

**å¸¸è§è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®æ˜¯å¦æ­£ç¡®
- ç¡®ä¿SSLè¯ä¹¦æ–‡ä»¶å­˜åœ¨ä¸”æƒé™æ­£ç¡®
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- ç¡®ä¿DockeræœåŠ¡æ­£åœ¨è¿è¡Œ

### 10.2 åŸŸåæ— æ³•è®¿é—®

**é—®é¢˜**: é€šè¿‡åŸŸåæ— æ³•è®¿é—®ç½‘ç«™

**æ’æŸ¥æ­¥éª¤**:
```bash
# æ£€æŸ¥DNSè§£æ
nslookup your-domain.com

# æ£€æŸ¥æœåŠ¡å™¨é˜²ç«å¢™
sudo ufw status

# æ£€æŸ¥äº‘æœåŠ¡å™¨å®‰å…¨ç»„è®¾ç½®
# ç¡®ä¿80å’Œ443ç«¯å£å·²å¼€æ”¾

# æµ‹è¯•æœ¬åœ°è®¿é—®
curl -I http://localhost
```

### 10.3 SSLè¯ä¹¦é—®é¢˜

**é—®é¢˜**: HTTPSè®¿é—®å‡ºç°è¯ä¹¦é”™è¯¯

**æ’æŸ¥æ­¥éª¤**:
```bash
# æ£€æŸ¥è¯ä¹¦æ–‡ä»¶
ls -la ~/timeline-notebook/ssl/

# æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæœŸ
openssl x509 -in ~/timeline-notebook/ssl/fullchain.pem -text -noout | grep -A 2 "Validity"

# æµ‹è¯•SSLé…ç½®
openssl s_client -connect your-domain.com:443
```

### 10.4 æ•°æ®åº“è¿æ¥é—®é¢˜

**é—®é¢˜**: åº”ç”¨æ— æ³•è¿æ¥æ•°æ®åº“

**æ’æŸ¥æ­¥éª¤**:
```bash
# æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
ls -la ~/timeline-notebook/data/

# è¿›å…¥åç«¯å®¹å™¨æ£€æŸ¥
docker-compose exec backend bash
python -c "from models import db; print('æ•°æ®åº“è¿æ¥æ­£å¸¸')"

# é‡æ–°åˆå§‹åŒ–æ•°æ®åº“
python init_db.py
```

### 10.5 æ–‡ä»¶ä¸Šä¼ é—®é¢˜

**é—®é¢˜**: æ— æ³•ä¸Šä¼ æ–‡ä»¶

**æ’æŸ¥æ­¥éª¤**:
```bash
# æ£€æŸ¥ä¸Šä¼ ç›®å½•æƒé™
ls -la ~/timeline-notebook/static/

# æ£€æŸ¥nginxé…ç½®ä¸­çš„æ–‡ä»¶å¤§å°é™åˆ¶
docker-compose exec nginx cat /etc/nginx/nginx.conf | grep client_max_body_size

# æ£€æŸ¥åç«¯æ—¥å¿—
docker-compose logs backend | grep -i upload
```

---

## ğŸ“š é™„å½•

### A.1 å¸¸ç”¨Dockerå‘½ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨
docker ps -a

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs å®¹å™¨å

# è¿›å…¥å®¹å™¨
docker exec -it å®¹å™¨å bash

# é‡å¯å®¹å™¨
docker restart å®¹å™¨å

# åœæ­¢æ‰€æœ‰å®¹å™¨
docker-compose down

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build

# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
docker stats
```

### A.2 å¸¸ç”¨ç³»ç»Ÿå‘½ä»¤

```bash
# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
top
htop
free -h
df -h

# æŸ¥çœ‹ç½‘ç»œè¿æ¥
ss -tlnp
netstat -tlnp

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep docker

# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
journalctl -u docker
sudo tail -f /var/log/syslog
```

### A.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æœåŠ¡å™¨ä¼˜åŒ–**:
   - å®šæœŸæ›´æ–°ç³»ç»Ÿ
   - é…ç½®swapåˆ†åŒº
   - ä¼˜åŒ–å†…æ ¸å‚æ•°

2. **Dockerä¼˜åŒ–**:
   - å®šæœŸæ¸…ç†æ— ç”¨é•œåƒ: `docker system prune`
   - ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºå‡å°é•œåƒå¤§å°
   - é…ç½®åˆé€‚çš„èµ„æºé™åˆ¶

3. **åº”ç”¨ä¼˜åŒ–**:
   - å¯ç”¨Gzipå‹ç¼©
   - é…ç½®é™æ€æ–‡ä»¶ç¼“å­˜
   - ä½¿ç”¨CDNåŠ é€Ÿ

### A.4 å®‰å…¨åŠ å›ºå»ºè®®

1. **æœåŠ¡å™¨å®‰å…¨**:
   ```bash
   # ç¦ç”¨rootç™»å½•
   sudo vim /etc/ssh/sshd_config
   # è®¾ç½® PermitRootLogin no
   
   # é…ç½®é˜²ç«å¢™
   sudo ufw enable
   sudo ufw allow 22
   sudo ufw allow 80
   sudo ufw allow 443
   
   # å®šæœŸæ›´æ–°ç³»ç»Ÿ
   sudo apt update && sudo apt upgrade
   ```

2. **åº”ç”¨å®‰å…¨**:
   - å®šæœŸæ›´æ–°ä¾èµ–åŒ…
   - ä½¿ç”¨å¼ºå¯†ç 
   - å¯ç”¨HTTPS
   - é…ç½®å®‰å…¨å¤´

---

## ğŸ‰ å®Œæˆï¼

æ­å–œï¼ä½ å·²ç»æˆåŠŸå°†æ—¶å…‰è½´ç¬”è®°é¡¹ç›®éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šã€‚ç°åœ¨ä½ å¯ä»¥:

1. âœ… é€šè¿‡åŸŸåè®¿é—®ä½ çš„åº”ç”¨
2. âœ… åˆ›å»ºç”¨æˆ·è´¦å·å¹¶ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½
3. âœ… ç›‘æ§åº”ç”¨è¿è¡ŒçŠ¶æ€
4. âœ… å®šæœŸå¤‡ä»½é‡è¦æ•°æ®

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·å‚è€ƒå¸¸è§é—®é¢˜æ’æŸ¥éƒ¨åˆ†ï¼Œæˆ–è€…æŸ¥çœ‹é¡¹ç›®çš„GitHub Issuesé¡µé¢å¯»æ±‚å¸®åŠ©ã€‚

**è®°ä½**:
- å®šæœŸå¤‡ä»½æ•°æ®
- ç›‘æ§æœåŠ¡å™¨èµ„æºä½¿ç”¨æƒ…å†µ
- åŠæ—¶æ›´æ–°ç³»ç»Ÿå’Œåº”ç”¨ä¾èµ–
- å…³æ³¨å®‰å…¨æ›´æ–°

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ ğŸš€